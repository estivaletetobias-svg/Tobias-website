<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tobias Estivalete | Estruturo performance humana</title>

    <!-- Google Fonts conforme Design System -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- GSAP e ScrollTrigger (CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- Lenis para Smooth Scroll (Opcional premium) -->
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>

    <!-- Tailwind Configuration (Design System Tokens) -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                        display: ['Space Grotesk', 'sans-serif'],
                    },
                    colors: {
                        stone: {
                            50: '#fafaf9',
                            100: '#f5f5f4',
                            200: '#e7e5e4',
                            300: '#d6d3d1',
                            400: '#a8a29e',
                            500: '#78716c',
                            600: '#57534e',
                            700: '#44403c',
                            800: '#292524',
                            900: '#1c1917',
                        },
                        'surface-light': '#EAEAE5',
                    }
                }
            }
        }
    </script>

    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #EAEAE5;
            color: #1C1C1C;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* Typography utils */
        .text-outline {
            color: transparent;
            -webkit-text-stroke: 1.5px #1C1917;
        }

        /* Grain / Noise Filter */
        .noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.04;
            pointer-events: none;
            z-index: 9999;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* Ocultar barra de rolagem mas manter funcionalidade */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #EAEAE5;
        }

        ::-webkit-scrollbar-thumb {
            background: #d6d3d1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a29e;
        }

        /* Acessibilidade - Foco Outline */
        *:focus-visible {
            outline: 2px solid #a8a29e;
            outline-offset: 2px;
        }

        /* Animations: prefers reduced motion fallback */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
        }

        /* Animação Inicial Oculta (Evita o Pop in antes do carregamento completo do animador) */
        #hero-badge,
        #hero-desc,
        #hero-buttons,
        #video-container,
        .reveal-text {
            opacity: 0;
            visibility: hidden;
            will-change: transform, opacity, filter;
        }
    </style>
</head>

<body class="selection:bg-stone-800 selection:text-white">

    <!-- Efeito granulado por cima de tudo -->
    <div class="noise"></div>

    <!-- NAVBAR MINIMALISTA -->
    <nav class="fixed top-0 left-0 w-full z-50 py-4 px-6 md:px-12 flex justify-between items-center bg-white/50 backdrop-blur-md border-b border-stone-300 shadow-sm transition-all duration-300"
        aria-label="Navegação principal">
        <div class="font-display font-medium tracking-tight text-lg text-stone-900 flex items-center gap-2">
            <div class="flex items-center justify-center">
                <img src="assets/raw_files/logo_novo.jpeg" alt="Logo Tobias"
                    class="w-8 h-8 rounded-sm mix-blend-multiply" />
            </div>
            Tobias <span class="text-stone-400">Estivalete</span>
        </div>

        <div
            class="hidden md:flex items-center gap-6 text-[10px] lg:text-xs font-mono uppercase tracking-widest text-stone-600">
            <a href="#home" class="hover:text-stone-900 transition-colors">Home</a>
            <span class="text-stone-300">|</span>
            <a href="#projetos" class="hover:text-stone-900 transition-colors">Projetos</a>
            <span class="text-stone-300">|</span>
            <a href="#vault" class="hover:text-stone-900 transition-colors">Vault</a>
            <span class="text-stone-300">|</span>
            <a href="#newsletter" class="hover:text-stone-900 transition-colors">Newsletter</a>
            <span class="text-stone-300">|</span>
            <a href="#comunidade" class="hover:text-stone-900 transition-colors">Comunidade</a>
            <span class="text-stone-300">|</span>
            <a href="#loja" class="hover:text-stone-900 transition-colors">Loja</a>
            <span class="text-stone-300">|</span>
            <a href="#sobre" class="hover:text-stone-900 transition-colors">Sobre</a>
            <span class="text-stone-300">|</span>
            <a href="#contato" class="hover:text-stone-900 transition-colors">Contato</a>
        </div>

        <button
            class="relative flex items-center justify-center p-2 rounded-full hover:bg-stone-200/50 transition-colors text-stone-900 group"
            aria-label="Carrinho">
            <i data-lucide="shopping-bag" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
            <span class="absolute top-1 right-1 w-2 h-2 bg-stone-900 rounded-full animate-pulse"></span>
        </button>
    </nav>

    <!-- WRAPPER GERAL -->
    <div class="max-w-[1440px] mx-auto border-x border-stone-300 relative bg-[#EAEAE5] shadow-2xl shadow-stone-200">

        <!-- GRID VERTICAL NO BACKGROUND -->
        <div
            class="absolute inset-0 pointer-events-none grid grid-cols-1 md:grid-cols-12 gap-0 z-0 h-full w-full opacity-40">
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
            <div class="hidden md:block md:col-span-1 border-r border-stone-300 h-full"></div>
        </div>

        <!-- EFEITOS DE LUZ RADIAL NO BACKGROUND -->
        <div class="absolute top-0 right-0 w-full h-[100dvh] overflow-hidden pointer-events-none z-0">
            <div
                class="absolute top-[-10%] right-[-10%] w-[600px] h-[600px] bg-gradient-to-br from-stone-200 to-transparent rounded-full blur-3xl opacity-50">
            </div>
            <div
                class="absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-gradient-to-tr from-white to-stone-300/50 rounded-full blur-3xl">
            </div>
        </div>

        <!-- HERO SECTION (Pin Container) -->
        <!-- HERO SECTION (Pin Container) -->
        <main id="hero-section"
            class="relative z-10 w-full h-[100dvh] flex flex-col border-b border-stone-300 overflow-hidden bg-[#EAEAE5]">

            <!-- Vídeo de Fundo Fullscreen -->
            <div class="absolute inset-0 w-full h-full z-0 overflow-hidden" id="video-container">
                <video id="product-video" src="Tobias_vídeo.mp4" class="hidden w-full h-full object-cover" playsinline
                    webkit-playsinline muted preload="auto"></video>

                <!-- Canvas para desenho hiper fluido estilo Apple -->
                <canvas id="video-canvas"
                    class="absolute inset-0 w-full h-full object-cover transform scale-105 z-0"></canvas>

                <!-- Overlays Claro para Leitura Premium -->
                <!-- Gradiente claro à esquerda para a leitura do texto -->
                <div class="absolute inset-0 bg-gradient-to-r from-[#EAEAE5]/90 via-[#EAEAE5]/50 to-transparent"></div>
                <!-- Escurece suavemente as bordas inferiores ou superiores pro caso do navbar se cruzar com o vídeo brilhante -->
                <div
                    class="absolute inset-0 bg-gradient-to-t from-[#EAEAE5]/30 via-transparent to-[#EAEAE5]/50 pointer-events-none">
                </div>
            </div>

            <!-- Coluna de Texto: Sobreposta ao Vídeo -->
            <div
                class="relative z-20 flex-1 px-6 py-12 md:px-16 flex flex-col justify-center h-full max-w-4xl pt-[72px] md:pt-0">

                <div class="inline-flex items-center gap-2 mb-6" id="hero-badge">
                    <span class="w-2 h-2 bg-stone-900 rounded-full animate-pulse"></span>
                    <span class="text-xs font-mono uppercase tracking-widest text-stone-500">Engenharia de
                        Precisão</span>
                </div>

                <h1 class="font-display text-[11vw] sm:text-6xl md:text-[4.5rem] lg:text-[5.5rem] font-bold tracking-tighter leading-[0.85] mb-6 flex flex-col text-stone-900"
                    id="hero-title">
                    <span class="block overflow-hidden pb-2 -mb-2"><span
                            class="block reveal-text translate-y-[110%]">Estruturo</span></span>
                    <span class="block overflow-hidden pb-3 -mb-3"><span
                            class="block reveal-text text-transparent translate-y-[110%]"
                            style="-webkit-text-stroke: 1.5px #1C1917;">performance</span></span>
                    <span class="block overflow-hidden"><span
                            class="block reveal-text text-stone-900 translate-y-[110%]">humana.</span></span>
                </h1>

                <h2 class="text-base md:text-lg text-stone-600 max-w-md leading-relaxed font-light mb-10 overflow-hidden"
                    id="hero-desc">
                    E construo sistemas inteligentes para escalar disciplina e autoridade.
                </h2>

                <div class="flex flex-col sm:flex-row gap-4" id="hero-buttons">
                    <button
                        class="group relative px-8 py-4 bg-white/80 backdrop-blur-md text-stone-900 overflow-hidden rounded-full transition-all hover:-translate-y-1 hover:shadow-2xl shadow-stone-900/10 flex items-center justify-center gap-3 w-full sm:w-auto"
                        aria-label="Explorar detalhes">
                        <div
                            class="absolute inset-0 w-full h-full bg-white translate-y-full group-hover:translate-y-0 transition-transform duration-500 ease-out z-0">
                        </div>
                        <span
                            class="relative z-10 font-mono text-xs uppercase tracking-widest font-semibold flex items-center gap-2">
                            Explorar <i data-lucide="arrow-down" class="w-4 h-4"></i>
                        </span>
                    </button>
                </div>

            </div>
        </main>

        <!-- SEÇÃO DE RODAPÉ/CONTINUAÇÃO PARA TESTAR O SCROLL -->
        <!-- O scroll-scrub exige espaço para rolar, esta seção e o pin criarão esse espaço -->
        <section
            class="h-screen flex items-center justify-center text-center p-8 bg-stone-900 text-white border-t border-stone-300 relative z-10">
            <div>
                <span class="text-xs font-mono uppercase tracking-widest text-stone-400 mb-4 block">Próxima
                    Geração</span>
                <h2 class="text-4xl md:text-6xl font-display font-medium tracking-tighter">Escreva o futuro.</h2>
            </div>
        </section>

    </div>

    <!-- SCRIPTS -->
    <script>
        // 1. Inicializar Ícones
        lucide.createIcons();

        // 2. Inicializar Lenis (Tratamento para Smooth Scroll)
        const lenis = new Lenis({
            lerp: 0.1, // Suavidade (mais baixo = mais suave)
            smoothWheel: true,
        });

        lenis.on('scroll', ScrollTrigger.update);

        gsap.ticker.add((time) => {
            lenis.raf(time * 1000);
        });

        gsap.ticker.lagSmoothing(0);

        // 3. Registrar GSAP
        gsap.registerPlugin(ScrollTrigger);

        // 4. Animação de Entrada e Saída (Hero Reveal + Fade no Scroll Exato do Design System)
        document.addEventListener('DOMContentLoaded', () => {
            // A física do design_system.html usa "cubic-bezier(0.16, 1, 0.3, 1)", 
            // que em GSAP mapeia de forma mais elegante para "expo.out" ou "power4.out".

            // Setup inicial: translateY e blur, usando autoAlpha (que mapeia visibilidade tbm)
            gsap.set(["#hero-badge", "#hero-desc", "#hero-buttons"], { filter: "blur(10px)", y: 32 });
            gsap.set("#video-container", { scale: 0.95, filter: "blur(15px)" });

            const introTl = gsap.timeline({ delay: 0.1 });

            // Timeline de Entrada (Fade + Blur IN Premium) usando autoAlpha
            introTl.to("#video-container", { autoAlpha: 1, scale: 1, filter: "blur(0px)", duration: 2, ease: "power4.out" })
                .to("#hero-badge", { autoAlpha: 1, filter: "blur(0px)", y: 0, duration: 1.2, ease: "power4.out" }, "-=1.5")
                .to(".reveal-text", { y: "0%", autoAlpha: 1, filter: "blur(0px)", stagger: 0.15, duration: 1.2, ease: "power4.out" }, "-=1.0")
                .to("#hero-desc", { autoAlpha: 1, filter: "blur(0px)", y: 0, duration: 1.2, ease: "power4.out" }, "-=1.0")
                .to("#hero-buttons", { autoAlpha: 1, filter: "blur(0px)", y: 0, duration: 1.2, ease: "power4.out" }, "-=1.0");

            // Timeline de Saída baseada no Scroll (Fade + Blur OUT com a Mesma Física)
            gsap.to(["#hero-badge", "#hero-title", "#hero-desc", "#hero-buttons"], {
                scrollTrigger: {
                    trigger: "#hero-section",
                    start: "top top", // Começa quando rola
                    end: "top -60%",  // Espaçamento para desaparecer
                    scrub: 1          // "esmaece quando scrola pra baixo, reaparece quando sobe"
                },
                opacity: 0,
                filter: "blur(12px)",
                y: -32, // sobe 2rem refletindo a entrada de baixo pra cima
                stagger: 0.05,
                ease: "power2.inOut"
            });
        });

        // 5. Novo Stack de Vídeo: API Canvas 2D + RequestAnimationFrame Lerping (Real Apple-like)
        const video = document.getElementById('product-video');
        const canvas = document.getElementById('video-canvas');
        const ctx = canvas.getContext('2d');

        let targetTime = 0;
        let currentTime = 0;

        function renderCanvas() {
            if (video.readyState >= 2) { // HAVE_CURRENT_DATA
                // Ajusta a resolução do canvas caso não corresponda
                if (canvas.width !== video.videoWidth) {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                }
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            }
        }

        // Engine de renderização contínua atrelada puramente ao requestAnimationFrame da tela
        function tick() {
            // Em vez de suavizar a transição com matemática manual pesada (double-lerp), 
            // confiamos no Lenis para mandar a posição de scroll suave, 
            // evitando desconexão entre o mouse e o vídeo (responsividade instantânea).
            currentTime = targetTime;

            // Verifica se o tempo real mudou o suficiente para gastar decodificação do vídeo
            if (Math.abs(video.currentTime - currentTime) > 0.01) {
                video.currentTime = currentTime;
                renderCanvas();
            }

            requestAnimationFrame(tick);
        }

        function initCanvasScrub() {
            if (video.dataset.scrubInitialized === 'true') return;
            video.dataset.scrubInitialized = 'true';

            // Inicia o looper
            requestAnimationFrame(tick);

            // Usa ScrollTrigger apenas para alimentar a variável 'targetTime' baseada no scroll
            ScrollTrigger.create({
                trigger: "#hero-section",
                start: "top top",
                end: "+=120%", // ROLAGEM CUSTA MENOS ESFORÇO: o vídeo passa super rápido de forma ágil com pouco scroll
                pin: true,
                anticipatePin: 1,
                onUpdate: (self) => {
                    // Mapeia o progresso (0 a 1) na duração total do vídeo
                    targetTime = self.progress * (video.duration || 1);
                }
            });

            ScrollTrigger.refresh();
        }

        // Preload robusto e start da engine
        if (video.readyState >= 1) {
            initCanvasScrub();
        } else {
            video.addEventListener('loadedmetadata', initCanvasScrub);
        }

        video.load();

        // 6. Preferências acessibilidade motion
        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');
        if (prefersReducedMotion.matches) {
            gsap.globalTimeline.timeScale(100); // acelera todas as animações infinitamente
            ScrollTrigger.disable(); // pode desativar o scrub se motion causar desconforto
            // se desativado, o section pin e scrub não ocorrem. O layout flui normalmente.
        }

    </script>
</body>

</html>